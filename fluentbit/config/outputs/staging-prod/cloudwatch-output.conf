[OUTPUT]
    Name cloudwatch_logs
    Match docker.*
    region us-west-2
    auto_create_group true
    log_key log
    metric_namespace ${LOG_GROUP_NAME}/logs
    log_group_name ${LOG_GROUP_NAME}/
    log_group_template ${LOG_GROUP_NAME}/logs$container_name
    log_stream_prefix stdouterr-

[OUTPUT]
    Name cloudwatch_logs
    Match file_django*
    region us-west-2
    auto_create_group true
    log_key log
    metric_namespace ${LOG_GROUP_NAME}/logs
    log_group_name ${LOG_GROUP_NAME}/django
    log_stream_prefix tail-django-

[OUTPUT]
    Name cloudwatch_logs
    Match file_caddy*
    region us-west-2
    auto_create_group true
    metric_namespace ${LOG_GROUP_NAME}/logs
    log_group_name ${LOG_GROUP_NAME}/caddy
    log_stream_prefix tail-caddy-

[OUTPUT]
    Name cloudwatch_logs
    Match metric_*
    region us-west-2
    auto_create_group true
    log_format json/emf
    metric_namespace ${LOG_GROUP_NAME}/metrics
    log_group_name ${LOG_GROUP_NAME}/fallback
    log_group_template ${LOG_GROUP_NAME}/$tag
    log_stream_name metrics/fallback
    log_stream_template $tag