import {
    AdminField,
    ImprovementFormField,
    OutcomeFormField,
    VisitField,
    BaseSurveyFields,
} from "@cbr/common";
import { ClientField } from "@cbr/common/src/forms/Client/clientFields";
import { FormField } from "@cbr/common/src/forms/Risks/riskFormFields";
import { appSchema, tableSchema } from "@nozbe/watermelondb";
import { mobileGenericField, modelName, tableKey } from "./constant";

export default appSchema({
    version: 1,
    tables: [
        tableSchema({
            name: modelName.users,
            columns: [
                { name: AdminField.username, type: "string" },
                { name: AdminField.password, type: "string" },
                { name: AdminField.first_name, type: "string" },
                { name: AdminField.last_name, type: "string" },
                { name: AdminField.phone_number, type: "string", isOptional: true },
                { name: AdminField.role, type: "string" },
                { name: AdminField.zone, type: "number" },
                { name: AdminField.is_active, type: "boolean", isOptional: true },
                { name: mobileGenericField.created_at, type: "number" },
                { name: mobileGenericField.updated_at, type: "number" },
            ],
        }),
        tableSchema({
            name: modelName.clients,
            columns: [
                { name: tableKey.user_id, type: "string", isIndexed: true },
                { name: ClientField.first_name, type: "string" },
                { name: ClientField.last_name, type: "string" },
                { name: ClientField.full_name, type: "string" },
                { name: ClientField.birth_date, type: "number" },
                { name: ClientField.gender, type: "string" },
                { name: ClientField.phone_number, type: "string", isOptional: true },
                { name: ClientField.disability, type: "string" },
                { name: ClientField.other_disability, type: "string", isOptional: true },
                { name: ClientField.longitude, type: "string", isOptional: true },
                { name: ClientField.latitude, type: "string", isOptional: true },
                { name: ClientField.zone, type: "number" },
                { name: ClientField.village, type: "string" },
                { name: ClientField.picture, type: "string", isOptional: true },
                { name: ClientField.caregiver_present, type: "boolean" },
                { name: ClientField.caregiver_name, type: "string", isOptional: true },
                { name: ClientField.caregiver_phone, type: "string", isOptional: true },
                { name: ClientField.caregiver_email, type: "string", isOptional: true },
                { name: ClientField.health_risk_level, type: "string" },
                { name: ClientField.health_timestamp, type: "number" },
                { name: ClientField.social_risk_level, type: "string" },
                { name: ClientField.social_timestamp, type: "number" },
                { name: ClientField.educat_risk_level, type: "string" },
                { name: ClientField.educat_timestamp, type: "number" },
                { name: ClientField.last_visit_date, type: "number" },
                { name: mobileGenericField.created_at, type: "number" },
                { name: mobileGenericField.updated_at, type: "number" },
            ],
        }),
        tableSchema({
            name: modelName.risks,
            columns: [
                { name: tableKey.client_id, type: "string", isIndexed: true },
                { name: FormField.risk_type, type: "string" },
                { name: FormField.risk_level, type: "string" },
                { name: FormField.requirement, type: "string" },
                { name: FormField.goal, type: "string" },
                { name: FormField.timestamp, type: "number" },
            ],
        }),
        tableSchema({
            name: "referrals",
            columns: [
                { name: "date_referred", type: "number" },
                { name: "date_resolved", type: "number" },
                { name: "resolved", type: "boolean" },
                { name: "outcome", type: "string" },
                { name: "picture", type: "string", isOptional: true },
                { name: "wheelchair", type: "boolean" },
                { name: "wheelchair_experience", type: "string" },
                { name: "hip_width", type: "number" },
                { name: "wheelchair_owned", type: "boolean" },
                { name: "wheelchair_repairable", type: "boolean" },
                { name: "physiotherapy", type: "boolean" },
                { name: "condition", type: "string" },
                { name: "prosthetic", type: "boolean" },
                { name: "prosthetic_injury_location", type: "string" },
                { name: "orthotic", type: "boolean" },
                { name: "orthotic_injury_location", type: "string" },
                { name: "services_other", type: "string" },
                { name: "client_id", type: "string", isIndexed: true },
                { name: "user_id", type: "string", isIndexed: true },
                { name: "created_at", type: "number" },
                { name: "updated_at", type: "number" },
            ],
        }),
        tableSchema({
            name: "surveys",
            columns: [
                { name: tableKey.client_id, type: "string", isIndexed: true },
                { name: tableKey.user_id, type: "string", isIndexed: true },
                { name: BaseSurveyFields.survey_date, type: "number" },
                { name: BaseSurveyFields.health, type: "string" },
                { name: BaseSurveyFields.health_have_rehabilitation_access, type: "boolean" },
                { name: BaseSurveyFields.health_need_rehabilitation_access, type: "boolean" },
                { name: BaseSurveyFields.health_have_assistive_device, type: "boolean" },
                { name: BaseSurveyFields.health_working_assistive_device, type: "boolean" },
                { name: BaseSurveyFields.health_need_assistive_device, type: "boolean" },
                {
                    name: BaseSurveyFields.health_assistive_device_type,
                    type: "string",
                    isOptional: true,
                },
                { name: BaseSurveyFields.health_services_satisfaction, type: "string" },
                { name: BaseSurveyFields.school_currently_attend, type: "boolean" },
                { name: BaseSurveyFields.school_grade, type: "number" },
                {
                    name: BaseSurveyFields.school_not_attend_reason,
                    type: "string",
                    isOptional: true,
                },
                { name: BaseSurveyFields.school_ever_attend, type: "boolean" },
                { name: BaseSurveyFields.school_want_attend, type: "boolean" },
                { name: BaseSurveyFields.social_community_valued, type: "boolean" },
                { name: BaseSurveyFields.social_independent, type: "boolean" },
                { name: BaseSurveyFields.social_able_participate, type: "boolean" },
                { name: BaseSurveyFields.social_affected_by_disability, type: "boolean" },
                { name: BaseSurveyFields.social_discrimination, type: "boolean" },
                { name: BaseSurveyFields.work, type: "boolean" },
                { name: BaseSurveyFields.work_what, type: "string", isOptional: true },
                { name: BaseSurveyFields.work_status, type: "string", isOptional: true },
                { name: BaseSurveyFields.work_meet_financial_needs, type: "boolean" },
                { name: BaseSurveyFields.work_affected_by_disability, type: "boolean" },
                { name: BaseSurveyFields.work_want, type: "boolean" },
                { name: BaseSurveyFields.food_security, type: "string" },
                { name: BaseSurveyFields.food_enough_monthly, type: "boolean" },
                { name: BaseSurveyFields.food_enough_for_child, type: "string", isOptional: true },
                { name: BaseSurveyFields.empowerment_organization_member, type: "boolean" },
                {
                    name: BaseSurveyFields.empowerment_organization,
                    type: "string",
                    isOptional: true,
                },
                { name: BaseSurveyFields.empowerment_rights_awareness, type: "boolean" },
                { name: BaseSurveyFields.empowerment_influence_others, type: "boolean" },
                { name: BaseSurveyFields.shelter_adequate, type: "boolean" },
                { name: BaseSurveyFields.shelter_essential_access, type: "boolean" },
                { name: mobileGenericField.created_at, type: "number" },
            ],
        }),
        tableSchema({
            name: modelName.visits,
            columns: [
                { name: tableKey.client_id, type: "string", isIndexed: true },
                { name: tableKey.user_id, type: "string" },
                { name: VisitField.health_visit, type: "boolean" },
                { name: VisitField.educat_visit, type: "boolean" },
                { name: VisitField.social_visit, type: "boolean" },
                { name: VisitField.longitude, type: "string", isOptional: true },
                { name: VisitField.latitude, type: "string", isOptional: true },
                { name: VisitField.zone, type: "number" },
                { name: VisitField.village, type: "string" },
                { name: mobileGenericField.created_at, type: "number" },
            ],
        }),
        tableSchema({
            name: modelName.outcomes,
            columns: [
                { name: tableKey.visit_id, type: "string", isIndexed: true },
                { name: OutcomeFormField.riskType, type: "string" },
                { name: OutcomeFormField.goalStatus, type: "string" },
                { name: OutcomeFormField.outcome, type: "string" },
            ],
        }),
        tableSchema({
            name: modelName.improvements,
            columns: [
                { name: tableKey.visit_id, type: "string", isIndexed: true },
                { name: ImprovementFormField.riskType, type: "string" },
                { name: ImprovementFormField.provided, type: "string" },
                { name: ImprovementFormField.description, type: "string" },
            ],
        }),
    ],
});
